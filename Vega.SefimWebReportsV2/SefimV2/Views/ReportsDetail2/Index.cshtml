@model IEnumerable<SefimV2.Models.SubeCiro>

@{
    ViewBag.Title = "Detay Raporları";
    Layout = "~/Views/Shared/_LayoutPage.cshtml";

    var urlHelper = new UrlHelper(Html.ViewContext.RequestContext);
    string baseUrl = urlHelper.Content("~");
}
<script src="/Scripts/jquery-1.8.0.min.js"></script>
<script src="@(baseUrl)Scripts/MicrosoftAjax.js"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
<script src="/Assets/js/jquery.js"></script>
<script src="/Assets/js/bootstrap.js"></script>
<script src="~/Scripts/Scripts/jquery.validate-vsdoc.js"></script>
<script src="~/Scripts/Scripts/jquery.validate.js"></script>
<script src="/Assets/plugins/select2/select2.js"></script>
<link href="~/Content/ContentSefPanel/css/eker/eker.css" rel="stylesheet" />
<script src="~/Scripts/Scripts/custom/eker/eker.js"></script>

<div class="modal fade bs-example-modal-sm" id="modalPleaseWait" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">
                    <span class="glyphicon glyphicon-time"></span>&nbsp;Lütfen Bekleyiniz
                </h4>
            </div>
            <div class="modal-body">
                <img src="~/img/squares_loading.gif" class="img-responsive center-block" />
            </div>
        </div>
    </div>
</div>

<div class="panel panel-risklialan">
    <div class="panel-heading">
        <a class="txt-color-white subelerinSatisIstatisligiClick" data-toggle="collapse" href="#subelerinSatisIstatisligi" aria-expanded="false" data-ajaxcontainer="#subelerinSatisIstatisligi" style="font-weight:800;">
            ŞUBELERİN SATIŞ İSTATİKLERİ
            <i class="fa fa-plus-square-o" title="Açmak için tıklayınız."></i>
            <i class="fa fa-minus-square-o" title="Kapatmak için tıklayınız."></i>
        </a>
    </div>
    <div class="panel-body no-padding collapse" id="subelerinSatisIstatisligi">
        <br />
        <div class="container-fluid">
            <div class="form-group">

                <div class="m-content">
                    <div class="m-portlet">
                        <div class="m-portlet__body">
                            <div class="row">
                                @*<fieldset id="aa" class="well  the-fieldset ">*@
                                @*<legend class="the-legend">Şubelerin Satış İstatistikleri</legend>*@
                                <div class="col-md-12 col-sm-12 col-xs-12" style="border-right: solid 1px #ebedf2;">
                                    <div class="col-lg-2 col-md-2 col-sm-2">
                                        <div class="col-md-12 xdisplay_inputx form-group has-feedback">
                                            <input type="text" class="form-control has-feedback-left" id="dateGecerlilikTarihi" placeholder="Seçiniz" aria-describedby="inputSuccess2Status4">
                                            <span class="fa fa-calendar-o form-control-feedback left" aria-hidden="true"></span>
                                            <span id="inputSuccess2Status4" class="sr-only">(success)</span>
                                        </div>
                                    </div>
                                    <div class="col-lg-2 col-md-2 col-sm-2">
                                        <div class="col-md-12 xdisplay_inputx form-group has-feedback">
                                            <input type="text" class="form-control has-feedback-left" id="dateBitisTarihi" value="" placeholder="Seçiniz" aria-describedby="inputSuccess2Status5">
                                            <span class="fa fa-calendar-o form-control-feedback left" aria-hidden="true"></span>
                                            <span id="inputSuccess2Status5" class="sr-only">(success)</span>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <div class="col-md-12 xdisplay_inputx form-group has-feedback">
                                            <label>Şube Seç </label>                                            
                                            
                                        </div>
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <div class="col-md-12 xdisplay_inputx form-group has-feedback">                                          
                                            <span style="padding-right: 5px">Hepsini Seç / Temizle </span>
                                            <input type="checkbox" id="hepsiniSecSubelerinSatisIstatikleriComboSubeList">      
                                            <select name="SubelerinSatisIstatikleriComboSubeList" class="form-control m-select2" id="SubelerinSatisIstatikleriComboSubeList" multiple="multiple" style="min-width:150px; width:100%"> </select>
                                        </div>
                                    </div>
                                    <div class="x_title">
                                        <div class="clearfix">
                                            <div class="form-group-sm">
                                                <div class="col-md-12 xdisplay_inputx form-group has-feedback">
                                                    <div class="form-group">
                                                        <button type="button" class="btn btn-success pull-left" id="veriGetirBtnId"><i class="fa fa-search"></i> &nbsp; Veri Getir </button>
                                                        <button type="button" class="btn btn-primary pull-left" id="veriGetirBugunBtnId"> Bugün </button>
                                                        <button type="button" class="btn btn-primary pull-left" id="veriGetirDunBtnId"> Dün </button>
                                                        <button type="button" class="btn btn-primary pull-left" id="haftalikBtnId"> Haftalık </button>
                                                        <button type="button" class="btn btn-primary pull-left" id="aylikBtnId"><i class="fa fa-calendar-minus-o"></i> &nbsp; Aylık</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    @*<div class="col-md-12 col-sm-12 col-xs-12">
            <div class="btn-group" role="group" aria-label="Default button group" style="background-color:#ffffff">
                <button type="button" class="btn btn-outline-brand SubeCiroTableLimit" id="STL_1" data-id="1"> 1 </button>
                <button type="button" class="btn btn-outline-brand SubeCiroTableLimit" id="STL_5" data-id="5"> 5 </button>
                <button type="button" class="btn btn-outline-brand SubeCiroTableLimit" id="STL_50" data-id="50"> 50 </button>
                <button type="button" class="btn btn-outline-brand SubeCiroTableLimit" id="STL_-1" data-id="-1"> Tümü </button>
            </div>
        </div>*@
                                    <input type="hidden" id="SubeCiroTableLimit" value="@ViewBag.LimitSize" />
                                    <div id="SubeCiroSatisIstatistikID" data-limit="@ViewBag.LimitSize" style="min-width: 120px; height: 550px; margin: 0 auto;width:100%;">  </div>
                                </div>
                                @*</fieldset>*@
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        @*<span class="araadloader"></span>Yükleniyor...*@
    </div>
</div>
<br />
<div class="panel panel-risklialan">
    <div class="panel-heading">
        <a class="txt-color-white saatBazliSubeCiroBtnClick" data-toggle="collapse" href="#saatBazliSubeCiro" aria-expanded="false" data-ajaxcontainer="#saatBazliSubeCiro" style="font-weight:800;">
            SAAT BAZLI ŞUBE CİRO
            <i class="fa fa-plus-square-o" title="Açmak için tıklayınız."></i>
            <i class="fa fa-minus-square-o" title="Kapatmak için tıklayınız."></i>
        </a>
    </div>
    <div class="panel-body no-padding collapse" id="saatBazliSubeCiro">
        <br />
        <div class="container-fluid">
            <div class="form-group">
                <div class="m-content">
                    <div class="m-portlet">
                        <div class="m-portlet__body">
                            <div class="row">
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <div class="col-md-12 xdisplay_inputx form-group has-feedback">
                                                <label>Başlama Tarihi</label>
                                                <input type="text" class="form-control has-feedback-left" id="saatBazliStartDateId" placeholder="Seçiniz" aria-describedby="inputSuccess2Status4">
                                                <span class="fa fa-calendar-o form-control-feedback left" aria-hidden="true"></span>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <div class="col-md-12 xdisplay_inputx form-group has-feedback">
                                                <label>Bitiş Tarihi</label>
                                                @*<input class="has-feedback-left ekremd" data-val="true" placeholder="Seçiniz" id="saatBazliEndDateId" type="date" style="min-width:150px" />*@
                                                <input type="text" class="form-control has-feedback-left" id="saatBazliEndDateId" placeholder="Seçiniz" aria-describedby="inputSuccess2Status4">
                                                <span class="fa fa-calendar-o form-control-feedback left" aria-hidden="true"></span>
                                                <span id="inputSuccess2Status4" class="sr-only">(success)</span>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <div class="col-md-12 xdisplay_inputx form-group has-feedback">
                                                <label>Saat</label>
                                                <select name="saatBazliComboboxSaatListId" class="form-control has-feedback-left m-select2" id="saatBazliComboboxSaatListId" multiple="multiple" style="min-width:150px; width:100%"> </select>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md- col-sm-3">
                                            <div class="col-md-12 xdisplay_inputx form-group has-feedback">
                                                <label>Şube</label>
                                                <span style="padding-right: 5px">Hepsini Seç / Temizle </span>
                                                <input type="checkbox" id="hepsiniSecsaatBazliSubeComboListId">
                                                <select name="saatBazliSubeComboListId" class="form-control has-feedback-left m-select2" id="saatBazliSubeComboListId" multiple="multiple" style="min-width:150px; width:100%"> </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <div class="col-md-12 xdisplay_inputx form-group has-feedback">
                                                <label>Satış Tipi</label>
                                                <select name="SatisTipiComboBoxId" class="form-control has-feedback-left m-select2" id="SatisTipiComboBoxId" multiple="multiple" style="min-width:150px; width:100%">
                                                    <option value="0">Restoran</option>
                                                    <option value="2">Paket</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <div class="col-md-12 xdisplay_inputx form-group has-feedback">
                                                <label>Ürün Grubu</label>
                                                <select name="SubeyeGoreUrunGrubuListID" class="form-control has-feedback-left m-select2" id="SubeyeGoreUrunGrubuListID" multiple="multiple" style="min-width:150px; width:100%"> </select>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <div class="col-md-12 xdisplay_inputx form-group has-feedback">
                                                <label>Ürün</label>
                                                <select name="SubeUrunID" class="form-control has-feedback-left m-select2" id="SubeUrunID" multiple="multiple" style="min-width:150px; width:100%"> </select>
                                            </div>
                                        </div>
                                    </div>
                                    <br />
                                    <div class="x_title">
                                        <div class="clearfix">
                                            <div class="form-group-sm">
                                                <div class="col-md-12 xdisplay_inputx form-group has-feedback">
                                                    <div class="form-group">
                                                        <button type="button" class="btn btn-success pull-left" id="saatBazliSubeCiroVeriGetirBtnId"><i class="fa fa-search"></i> &nbsp; Veri Getir </button>
                                                        <button type="button" class="btn btn-primary pull-left" id="saatBazliVeriGetirBugunBtnId"> Bugün </button>
                                                        <button type="button" class="btn btn-primary pull-left" id="saatBazliVeriGetirDunBtnId"> Dün </button>
                                                        <button type="button" class="btn btn-primary pull-left " id="saatBazliHaftalikBtnId"> Haftalık </button>
                                                        <button type="button" class="btn btn-primary pull-left" id="saatBazliAylikBtnId"><i class="fa fa-calendar-minus-o"></i> &nbsp; Aylık</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            @*<div class="tab-content tableFixHead">*@
                                            @*table table-hover table-bordered*@
                                            @*<div>  <button type="button" class="btn btn-danger" id="btnCustomerState" title="Detayı Görüntüle" onclick="DataTableExport()"> <span class="glyphicon glyphicon-search"></span>    Veri Getir </button></div>*@
                                            <table id="tableSaatBazliSubeCiroRapor" class="table table-responsive table-hover table-condensed">
                                                <thead>
                                                    <tr str style=" background-color:#e3e6eb">
                                                        <th width="5%">Seç</th>
                                                        <th width="10%" style="text-align:right">Tarih</th>
                                                        <th width="15px" style="text-align:right">Toplam Tutar (₺)</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="divSaatBazliSubeCiroRapor" style="  font-weight:bold; background-color:white"></tbody>
                                            </table>
                                            @*</div>*@
                                        </div>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <div class="col-md-12 xdisplay_inputx form-group has-feedback">
                                                <div class="form-group">
                                                    @*<button type="button" class="btn btn-primary pull-left" id="saatBazliSubeCiroGrafikGosterBtnId"> Grafik Göster </button>*@
                                                    <button type="button" class="btn btn-primary pull-left" id="saatBazliSubeCiroGrafikGosterBtnId"><i class="fa fa-bar-chart"></i> &nbsp;Grafikde Göster </button>
                                                </div>
                                            </div>
                                            <br />
                                            <div id="SubeCiroSatisIstatistikIDb" data-limit="@ViewBag.LimitSize" style="min-width: 80px; height: 550px; margin: 0 auto;width:100%;">  </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        @*<span class="araadloader"></span>Yükleniyor...*@
    </div>
</div>

<script type="text/javascript">

    jQuery(document).ready(function () {
        //
        {
            var days = 31; // Days you want to subtract
            var date = new Date();
            var last = new Date(date.getTime() - (days * 24 * 60 * 60 * 1000));
            var day = last.getDate();
            var month = last.getMonth() + 1;
            var year = last.getFullYear();
            var outputDefault = year + '.' +
                (('' + month).length < 2 ? '0' : '') + month + '.' +
                (('' + day).length < 2 ? '0' : '') + day;

            var days = 7; // haftalık
            var date = new Date();
            var last = new Date(date.getTime() - (days * 24 * 60 * 60 * 1000));
            var day = last.getDate();
            var month = last.getMonth() + 1;
            var year = last.getFullYear();
            var outputHaftalik = (('' + day).length < 2 ? '0' : '') + day + '.' +
                (('' + month).length < 2 ? '0' : '') + month + '.' +
                year;

            var days = 0; // bugün
            var date = new Date();
            var last = new Date(date.getTime() - (days * 24 * 60 * 60 * 1000));
            var day = last.getDate();
            var month = last.getMonth() + 1;
            var year = last.getFullYear();
            var outputBugun = (('' + day).length < 2 ? '0' : '') + day + '.' +
                (('' + month).length < 2 ? '0' : '') + month + '.' +
                year;

            var days = 1; // yarın
            var date = new Date();
            var last = new Date(date.getTime() + (days * 24 * 60 * 60 * 1000));
            var day = last.getDate();
            var month = last.getMonth() + 1;
            var year = last.getFullYear();
            var outputYarin = (('' + day).length < 2 ? '0' : '') + day + '.' +
                (('' + month).length < 2 ? '0' : '') + month + '.' +
                year;

            var days = 1; // dün
            var date = new Date();
            var last = new Date(date.getTime() - (days * 24 * 60 * 60 * 1000));
            var day = last.getDate();
            var month = last.getMonth() + 1;
            var year = last.getFullYear();
            var outputDun = (('' + day).length < 2 ? '0' : '') + day + '.' +
                (('' + month).length < 2 ? '0' : '') + month + '.' +
                year;

            var days = 2; // dünün dünü
            var date = new Date();
            var last = new Date(date.getTime() - (days * 24 * 60 * 60 * 1000));
            var day = last.getDate();
            var month = last.getMonth() + 1;
            var year = last.getFullYear();
            var outputDun2 = (('' + day).length < 2 ? '0' : '') + day + '.' +
                (('' + month).length < 2 ? '0' : '') + month + '.' +
                year;

            var days = 31; // aylık
            var date = new Date();
            var last = new Date(date.getTime() - (days * 24 * 60 * 60 * 1000));
            var day = last.getDate();
            var month = last.getMonth() + 1;
            var year = last.getFullYear();
            var outputAylik = (('' + day).length < 2 ? '0' : '') + day + '.' +
                (('' + month).length < 2 ? '0' : '') + month + '.' +
                year;

            var d = new Date(); // endDate
            var month = d.getMonth() + 1;
            var day = d.getDate();
            var hours = d.getHours();
            var minut = d.getMinutes();
            var second = d.getSeconds();
            var output = (('' + day).length < 2 ? '0' : '') + day + '.' +
                (('' + month).length < 2 ? '0' : '') + month + '.' +
                d.getFullYear();
        }

        $('#dateGecerlilikTarihi').val(outputAylik);
        $('#dateBitisTarihi').val(output);

        {
            var StartDate = $("#dateGecerlilikTarihi").val() + ' 00:00:00';
            var EndDate = $("#dateBitisTarihi").val() + ' 23:59:59';
            var subeId = $("#saatBazliSubeComboListId").val();
            var saat = $('#saatBazliComboboxSaatListId').val();

            //Veri Getir butonu click durumu
            $(document).on("click", "#veriGetirBtnId", function (e) {
                showProgressBar();
                var StartDate = $("#dateGecerlilikTarihi").val() + ' 00:00:00';
                var EndDate = $("#dateBitisTarihi").val() + ' 23:59:59';
                var SubeId = $("#SubelerinSatisIstatikleriComboSubeList").val();
                $.SubeCiroSatisIstatistik(StartDate, EndDate, FilterData, SubeId);
            });
            //
            //bugün veri butonu click durumu
            $(document).on("click", "#veriGetirBugunBtnId", function (e) {
                showProgressBar();
                $('#dateGecerlilikTarihi').val(outputBugun);
                $('#dateBitisTarihi').val(outputYarin);
                var StartDate = $("#dateGecerlilikTarihi").val();
                var EndDate = $("#dateBitisTarihi").val();
                var SubeId = $("#SubelerinSatisIstatikleriComboSubeList").val();
                $.SubeCiroSatisIstatistik(StartDate, EndDate, FilterData, SubeId);
            });
            //dün veri butonu click durumu
            $(document).on("click", "#veriGetirDunBtnId", function (e) {
                showProgressBar();
                $('#dateGecerlilikTarihi').val(outputDun2);
                $('#dateBitisTarihi').val(outputDun);
                var StartDate = $("#dateGecerlilikTarihi").val();
                var EndDate = $("#dateBitisTarihi").val();
                var SubeId = $("#SubelerinSatisIstatikleriComboSubeList").val();
                $.SubeCiroSatisIstatistik(StartDate, EndDate, FilterData, SubeId);
            });
            //
            //haftalık veri butonu click durumu
            $(document).on("click", "#haftalikBtnId", function (e) {
                showProgressBar();
                $('#dateGecerlilikTarihi').val(outputHaftalik);
                $('#dateBitisTarihi').val(outputYarin);
                var StartDate = $("#dateGecerlilikTarihi").val();
                var EndDate = $("#dateBitisTarihi").val();
                var SubeId = $("#SubelerinSatisIstatikleriComboSubeList").val();
                $.SubeCiroSatisIstatistik(StartDate, EndDate, FilterData, SubeId);
            });
            //aylık Getir butonu click durumu
            $(document).on("click", "#aylikBtnId", function (e) {
                showProgressBar();
                $('#dateGecerlilikTarihi').val(outputAylik);
                $('#dateBitisTarihi').val(outputYarin);
                var StartDate = $("#dateGecerlilikTarihi").val();
                var EndDate = $("#dateBitisTarihi").val();
                var SubeId = $("#SubelerinSatisIstatikleriComboSubeList").val();
                $.SubeCiroSatisIstatistik(StartDate, EndDate, FilterData, SubeId);
            });
        }

        //$("#veriGetirBtnId").trigger("click");

        //AYLIK SATIS CHARTS****
        Highcharts.getOptions().colors = Highcharts.map(Highcharts.getOptions().colors, function (color) {
            return {
                radialGradient: {
                    cx: 0.5,
                    cy: 0.3,
                    r: 0.7
                },
                stops: [[0, color], [1, Highcharts.Color(color).brighten(-0.3).get('rgb')] // darken
                ]
            };
        });

        /*LimitSize SubeCiro*/
        var FilterData = @ViewBag.Limitsize;
        $(document).on("click", ".SubeCiroTableLimit", function (e) {
            var Limit = $(this).data('id');
            var setLimit = $("#SubeCiroTableLimit").val();
            if (Limit == setLimit) { return false; }
            $(".SubeCiroTableLimit").removeClass("LimitGroupBack");
            $(this).addClass("LimitGroupBack");
            $("#SubeCiroTableLimit").val(Limit);
            FilterData = Limit;
            var StartDate = $("#dateGecerlilikTarihi").val() + ' 00:00:00';
            var EndDate = $("#dateBitisTarihi").val() + ' 23:59:59';
            var SubeId = $("#SubelerinSatisIstatikleriComboSubeList").val();
            $.SubeCiroSatisIstatistik(StartDate, EndDate, Limit, SubeId);
        });
        /*LimitSize SubeCiro*/

    @* COMBOBOX SUBE LİSTESİ *@
        {
            $('#SubelerinSatisIstatikleriComboSubeList').select2();
            $('#saatBazliComboboxSaatListId').select2();
            $('#saatBazliSubeComboListId').select2();
            $('#SubeyeGoreUrunGrubuListID').select2();
            $('#SubeUrunID').select2();
            $('#SatisTipiComboBoxId').select2();

            function SubeComboboxList() {
                $.ajax({
                    url: '/ReportsDetail/SubelerListJson',
                    type: 'POST',
                    beforeSend: function (request) {
                        //mApp.blockPage();
                    },
                    complete: function () {
                        window.setTimeout(function () {
                            //mApp.unblockPage();
                        }, 100);
                    },
                    dataType: 'json',
                    success: function (data) {
                        {
                            var options = $('#SubelerinSatisIstatikleriComboSubeList');
                            var urunGroupCombo = $('#SubelerinSatisIstatikleriComboSubeList')
                            $('option', options).remove();
                            $('option', urunGroupCombo).remove();
                            //options.append($('<option />').val(0).text("Seçiniz"));
                            $.each(data, function () {
                                options.append($('<option />').val(this.Value).text(this.Text));
                            });
                            if ('Model.SubelerinSatisIstatikleriComboSubeList' > 0) {
                                $('#SubelerinSatisIstatikleriComboSubeList').val('Model.SubelerinSatisIstatikleriComboSubeList').trigger('change');
                            } else { $('#SubelerinSatisIstatikleriComboSubeList').val('0').trigger('change'); }
                        }
                        {
                            var options = $('#saatBazliSubeComboListId');
                            var urunGroupCombo = $('#saatBazliSubeComboListId')
                            $('option', options).remove();
                            $('option', urunGroupCombo).remove();
                            $.each(data, function () {
                                options.append($('<option />').val(this.Value).text(this.Text));
                            });
                            if ('Model.saatBazliSubeComboListId' > 0) {
                                $('#saatBazliSubeComboListId').val('Model.saatBazliSubeComboListId').trigger('change');
                            } else { $('#saatBazliSubeComboListId').val('0').trigger('change'); }
                        }
                    }
                });
            }
            SubeComboboxList();
        }
    @* COMBOBOX SUBE LİSTESİ *@

    @* COMBOBOX SAAT LİSTESİ *@
        {
            function SaatComboboxList() {
                $.ajax({
                    url: '/ReportsDetail2/SaatListJson',
                    type: 'POST',
                    beforeSend: function (request) {
                        //mApp.blockPage();
                    },
                    complete: function () {
                        window.setTimeout(function () {
                            //mApp.unblockPage();
                        }, 100);
                    },
                    dataType: 'json',
                    success: function (data) {
                        {
                            var options = $('#saatBazliComboboxSaatListId');
                            var urunGroupCombo = $('#saatBazliComboboxSaatListId')
                            $('option', options).remove();
                            $('option', urunGroupCombo).remove();
                            $.each(data, function () {
                                options.append($('<option />').val(this.Value).text(this.Text));
                            });
                            if ('Model.saatBazliComboboxSaatListId' > 0) {
                                $('#saatBazliComboboxSaatListId').val('Model.saatBazliComboboxSaatListId').trigger('change');
                            } else { $('#saatBazliComboboxSaatListId').val('0').trigger('change'); }
                        }
                    }
                });
            }
            SaatComboboxList();
        }
    @* COMBOBOX SAAT LİSTESİ *@

    @* COMBOBOX Ürün LİSTESİ *@
        {
        function SubeUrunList() {
        $.ajax({
            url: '/ReportsDetail2/SubeUrunListJson',
            type: 'POST',
            beforeSend: function (request) {
                //mApp.blockPage();
            },
            complete: function () {
                window.setTimeout(function () {
                    //mApp.unblockPage();
                }, 100);
            },
            dataType: 'json',
            success: function (data) {
                var options = $('#SubeUrunID');
                $('option', options).remove();
                $.each(data, function () {
                    options.append($('<option />').val(this.Value).text(this.Text));
                });
                if ('Model.SubeUrunID' > 0) {
                    $('#SubeUrunID').val('Model.SubeUrunID').trigger('change');
                } else { $('#SubeUrunID').val('0').trigger('change'); }
            }
        });
    }
    SubeUrunList();
      }
    @* COMBOBOX Ürün LİSTESİ *@

    @* COMBOBOX Ürün Grubu LİSTESİ *@
        {
        function MasaUstuRaporuUrunGrubuList() {
            $.ajax({
                url: '/ReportsDetail2/SubeUrunGrubuListJson',
                type: 'POST',
                beforeSend: function (request) {
                    //mApp.blockPage();
                },
                complete: function () {
                    window.setTimeout(function () {
                        //mApp.unblockPage();
                    }, 100);
                },
                dataType: 'json',
                success: function (data) {

                    //Ürün grubu list
                    var options = $('#SubeyeGoreUrunGrubuListID');
                    $('option', options).remove();
                    $.each(data, function () {
                        options.append($('<option />').val(this.Value).text(this.Text));
                    });
                    if ('Model.SubeyeGoreUrunGrubuListID' > 0) {
                        $('#SubeyeGoreUrunGrubuListID').val('Model.SubeyeGoreUrunGrubuListID').trigger('change');
                    } else { $('#SubeyeGoreUrunGrubuListID').val('0').trigger('change'); }
                }
            });
        }
        MasaUstuRaporuUrunGrubuList();
    }
    @* COMBOBOX Ürün Grubu LİSTESİ *@

    @* SUBE SATIS İSTATİSLİĞİ *@
        {
            var SubeCiroSatisIstatistik = Highcharts.chart('SubeCiroSatisIstatistikID', {
                /* data: {
                     table: ''
                 },*/
                chart: {
                    ////name: 'Rainfall',
                    //type: 'line',
                    name: 'Rainfall',
                    type: 'column',
                },
                title: {
                    text: 'Subelerin  Satıs İstatistigi'
                },
                yAxis: {
                    allowDecimals: false,
                    title: {
                        text: 'TOPLAM SATIŞ'
                    }
                },
                /*cubuklarda değerleri gost.*/
                plotOptions: {
                    series: {
                        borderWidth: 0,
                        dataLabels: {
                            enabled: true,
                            format: '{point.y:.1f}'
                        }
                    }
                },
                tooltip: {
                    formatter: function () {
                        //console.log(this.point.category);
                        //return  this.point.y + ' ' + this.point.category +
                        //    ' : <b>' + this.series.name + '</b><br/>';
                        return ' <b>' + ' (' + this.point.category + ') ' + this.series.name + ' : ' + '</b>' + ' <br/>' + this.point.y;
                    }
                }
            });

            $('.subelerinSatisIstatisligiClick').on('click', (ev) => {
                var SubeId = $("#SubelerinSatisIstatikleriComboSubeList").val();
                $.SubeCiroSatisIstatistik = function (StartDate, EndDate, FilterData, SubeId) {
                    var DataUrl = '/ReportsDetail2/SubeCiroSatisIstatistik?StartDate=' + StartDate + '&EndDate=' + EndDate + '&FilterData=' + FilterData + '&SubeId=' + SubeId + '';
                    $.ajax
                        ({
                            url: DataUrl,
                            type: 'GET',
                            dataType: 'json',
                            beforeSend: function (request) { },
                            complete: function () { /* window.setTimeout(function () { App.unblockUI(); }, 1000); */ },
                            success: function (data) {
                                SubeCiroSatisIstatistik.xAxis[0].setCategories(data.Categories, true, true);
                                while (SubeCiroSatisIstatistik.series.length > 0) {
                                    SubeCiroSatisIstatistik.series[0].remove(true);
                                }
                                $(data.Name).each(function (index, value) {
                                    SubeCiroSatisIstatistik.addSeries({
                                        name: value,
                                        data: []
                                    });
                                });
                                $(data.Name).each(function (index, value) {
                                    SubeCiroSatisIstatistik.series[index].setData(data.Data[value]);
                                });
                                hideProgressBar();
                            }
                        });
                }
            $.SubeCiroSatisIstatistik(StartDate, EndDate, FilterData, SubeId);
            });
        }
    @* SUBE SATIS İSTATİSLİĞİ *@


    @*** SAAT BAZLI CİRO RAPORU ***@

        {
            var StartDate = $("#saatBazliStartDateId").val() + ' 00:00:00';
            var EndDate = $("#saatBazliEndDateId").val() + ' 23:59:59';

            //bugün veri butonu click durumu
            $(document).on("click", "#saatBazliVeriGetirBugunBtnId", function (e) {
                debugger;
                $('#saatBazliStartDateId').val(outputBugun);
                $('#saatBazliEndDateId').val(outputYarin);
                var subeId = $('#saatBazliSubeComboListId').val();
                var saat = $('#saatBazliComboboxSaatListId').val();
                var StartDate = $("#saatBazliStartDateId").val();
                var EndDate = $("#saatBazliEndDateId").val();
                var urunGrubu = $('#SubeyeGoreUrunGrubuListID').val();
                var urunAdi = $('#SubeUrunID').val();
                var satisTipi = $('#SatisTipiComboBoxId').val();
                showProgressBar();
                SaatBazliTableData(StartDate, EndDate, subeId, saat, urunGrubu, urunAdi, satisTipi)
            });
            //dün veri butonu click durumu
            $(document).on("click", "#saatBazliVeriGetirDunBtnId", function (e) {

                $('#saatBazliStartDateId').val(outputDun2);
                $('#saatBazliEndDateId').val(outputDun);
                var StartDate = $("#saatBazliStartDateId").val();
                var EndDate = $("#saatBazliEndDateId").val();
                var subeId = $("#saatBazliSubeComboListId").val();
                var saat = $('#saatBazliComboboxSaatListId').val();
                var urunGrubu = $('#SubeyeGoreUrunGrubuListID').val();
                var urunAdi = $('#SubeUrunID').val();
                var satisTipi = $('#SatisTipiComboBoxId').val();
                showProgressBar();
                SaatBazliTableData(StartDate, EndDate, subeId, saat, urunGrubu, urunAdi, satisTipi)
            });
            //
            //haftalık veri butonu click durumu
            $(document).on("click", "#saatBazliHaftalikBtnId", function (e) {

                $('#saatBazliStartDateId').val(outputHaftalik);
                $('#saatBazliEndDateId').val(outputYarin);
                var StartDate = $("#saatBazliStartDateId").val();
                var EndDate = $("#saatBazliEndDateId").val();
                var subeId = $("#saatBazliSubeComboListId").val();
                var saat = $('#saatBazliComboboxSaatListId').val();
                var urunGrubu = $('#SubeyeGoreUrunGrubuListID').val();
                var urunAdi = $('#SubeUrunID').val();
                var satisTipi = $('#SatisTipiComboBoxId').val();
                showProgressBar();
                SaatBazliTableData(StartDate, EndDate, subeId, saat, urunGrubu, urunAdi, satisTipi)
            });
            //aylık Getir butonu click durumu
            $(document).on("click", "#saatBazliAylikBtnId", function (e) {

                $('#saatBazliStartDateId').val(outputAylik);
                $('#saatBazliEndDateId').val(outputYarin);
                var StartDate = $("#saatBazliStartDateId").val();
                var EndDate = $("#saatBazliEndDateId").val();
                var subeId = $("#saatBazliSubeComboListId").val();
                var saat = $('#saatBazliComboboxSaatListId').val();
                var urunGrubu = $('#SubeyeGoreUrunGrubuListID').val();
                var urunAdi = $('#SubeUrunID').val();
                var satisTipi = $('#SatisTipiComboBoxId').val();
                showProgressBar();
                SaatBazliTableData(StartDate, EndDate, subeId, saat, urunGrubu, urunAdi, satisTipi)
            });
        }

        {
            @* SAAT BAZLI ŞUBE CİRO RAPORU CHART *@
        var IkiTarihAralikliKarsilastirmaRaporu_B = Highcharts.chart('SubeCiroSatisIstatistikIDb', {
                /* data: {
                     table: ''
                 },*/
                chart: {
                    name: 'Rainfall',
                    type: 'column',
                    //styledMode: true,
                },
                title: {
                    text: 'Satıs İstatistiki'
                },
                yAxis: {
                    allowDecimals: false,
                    title: {
                        text: 'TOPLAM SATIŞ'
                    }
                },
                /*cubuklarda değerleri gost.*/
                plotOptions: {
                    series: {
                        borderWidth: 0,
                        dataLabels: {
                            enabled: true,
                            format: '{point.y:.1f}'
                        }
                    }
                },
                tooltip: {
                    formatter: function () {
                        //console.log(this.point.category);
                        //return  this.point.y + ' ' + this.point.category +
                        //    ' : <b>' + this.series.name + '</b><br/>';
                        return ' <b>' + ' (' + this.point.category + ') ' + this.series.name + ' : ' + '</b>' + ' <br/>' + this.point.y;
                    }
                }
            });

            $.IkiTarihAralikliKarsilastirmaRaporu_B = function (StartDate, EndDate, subeId, saat, urunGrubu, urunAdi, satisTipi) {
                var DataUrl = '/ReportsDetail2/SaatBazliSubeCiroTableChart?StartDateTime=' + StartDate + '&EndDateTime=' + EndDate + '&SubeId=' + subeId + '&Saat=' + saat + '&UrunGrubuAdi=' + urunGrubu + '&UrunAdi=' + encodeURIComponent(urunAdi) + '&SatisTipi=' + satisTipi + '';
                $.ajax
                    ({
                        url: DataUrl,
                        type: 'GET',
                        dataType: 'json',
                        beforeSend: function (request) { },
                        complete: function () { /* window.setTimeout(function () { App.unblockUI(); }, 1000); */ },
                        success: function (data) {
                            IkiTarihAralikliKarsilastirmaRaporu_B.xAxis[0].setCategories(data.Categories, true, true);

                            while (IkiTarihAralikliKarsilastirmaRaporu_B.series.length > 0) {
                                IkiTarihAralikliKarsilastirmaRaporu_B.series[0].remove(true);
                            }
                            setTimeout(function myfunction() {
                                $(data.Name).each(function (index, value) {
                                    IkiTarihAralikliKarsilastirmaRaporu_B.addSeries({
                                        name: value,
                                        data: []
                                    });
                                });
                            }, 500);

                            setTimeout(function myfunction() {
                                $(data.Name).each(function (index, value) {
                                    IkiTarihAralikliKarsilastirmaRaporu_B.series[index].setData(data.Data[value]);
                                });
                            }, 500);
                            hideProgressBar();
                        }
                    });
            }

            $(document).on("click", "#saatBazliSubeCiroGrafikGosterBtnId", function (e) {
                showProgressBar();
                var subeId = $('#saatBazliSubeComboListId').val();
                var saat = $('#saatBazliComboboxSaatListId').val();
                var StartDate = $("#saatBazliStartDateId").val();
                var EndDate = $("#saatBazliEndDateId").val();
                var urunGrubu = $('#SubeyeGoreUrunGrubuListID').val();
                var urunAdi = $('#SubeUrunID').val();
                var satisTipi = $('#SatisTipiComboBoxId').val();

                $.IkiTarihAralikliKarsilastirmaRaporu_B(StartDate, EndDate, subeId, saat, urunGrubu, urunAdi, satisTipi);
            });
            @* SAAT BAZLI ŞUBE CİRO RAPORU CHART *@

            //
            function SaatBazliTableData(StartDate, EndDate, subeId, saat, urunGrubu, urunAdi,satisTipi) {
                $.ajax({
                    url: '/ReportsDetail2/SaatBazliSubeCiroTable?StartDateTime=' + StartDate + '&EndDateTime=' + EndDate + '&SubeId=' + subeId + '&Saat=' + saat + '&UrunGrubuAdi=' + urunGrubu + '&UrunAdi=' + encodeURIComponent(urunAdi) + '&SatisTipi=' + satisTipi + '',
                    type: 'GET',
                    dataType: 'json',
                    success: function (result) {
                        var addRow = '';
                        $.each(result.Data, function (index, value) {
                            var ds = value.Ciro.toString();
                            var currency_symbol = "₺"
                            var formattedOutput = new Intl.NumberFormat('tr-TR', {
                                style: 'currency',
                                currency: 'TRY',
                                minimumFractionDigits: 2,
                            });

                            addRow +=
                              '<tr Tarih=' + value.Tarih + ' Saat=' + saat + ' childDataGosterSaatGun="test_' + index + '" data-child-value="hidden ' + value.Tarih + '" role="row" class="odd" style="color:#000000;font-weight:bold">'
                            + '<td width="5%" class="details-controlTable" id="' + subeId + '">  <a class="btn btn-s btn-success detayGostere " title="Detayı Görüntüle"> <span class="glyphicon glyphicon-plus"></span> </a> </td>'
                            + '<td width="10%" style="text-align:right">' + value.Tarih + '</td>'
                            + '<td width="15%" style="text-align:right">' + formattedOutput.format(ds).replace(currency_symbol, '') + '</td>'
                            + '</tr>';
                            addRow += '<tr  id="test_' + index + '" dataGosterSaatGun="test_' + index + '" class="table table-hover table-bordered table-responsive table-condensed" style="display:none;"></tr>';
                        });

                        $("#divSaatBazliSubeCiroRapor").html('');
                        window.setTimeout(function () {
                            $("#divSaatBazliSubeCiroRapor").append(addRow);
                        }, 1000);
                        hideProgressBar();
                    }
                });
            }

            $(document).on("click", "#saatBazliSubeCiroVeriGetirBtnId", function (e) {
                showProgressBar();
                var subeId = $('#saatBazliSubeComboListId').val();
                var saat = $('#saatBazliComboboxSaatListId').val();
                var StartDate = $("#saatBazliStartDateId").val();
                var EndDate = $("#saatBazliEndDateId").val();
                var urunGrubu = $('#SubeyeGoreUrunGrubuListID').val();
                var urunAdi = $('#SubeUrunID').val();
                var satisTipi = $('#SatisTipiComboBoxId').val();

                SaatBazliTableData(StartDate, EndDate, subeId, saat, urunGrubu, urunAdi, satisTipi)
            });

        @* Child1 *@

            var table = $('#tableSaatBazliSubeCiroRapor').DataTable(
                {
                    language: {
                        info: "_TOTAL_ kayıttan _START_ - _END_ kayıt gösteriliyor.",
                        infoEmpty: ".",
                        loadingRecords: "Kayıtlar yükleniyor.",
                        zeroRecords: "Tablo boş",
                        search: "Arama:",
                        infoFiltered: "(toplam _MAX_ kayıttan filtrelenenler)",
                        //paginate: {
                        //    first: "İlk",
                        //    previous: "Önceki",
                        //    next: "Sonraki",
                        //    last: "Son"
                        //},
                    },
                    'columnDefs': [{
                        'targets': [0,1,2], /* column index */
                        'orderable': false, /* true or false */
                    }],
                    searching: false,
                    dom: 'Bfrtip',
                });
            table.buttons().remove();

            var table = $('#tableSaatBazliSubeCiroRapor').DataTable();
            $('#tableSaatBazliSubeCiroRapor').on('click', 'td.details-controlTable', function () {
                showProgressBar();
                var childTable = $(this).parent("tr").attr("childDataGosterSaatGun");
                $('[dataGosterSaatGun="' + childTable + '"]').slideToggle();
                var tr = $(this).closest('tr');
                var row = table.row(tr);
                var subeId = $(this).attr("id");
                var StartDate = $(this).parent("tr").attr("Tarih");
                //var EndDate = $(this).parent("tr").attr("Tarih");
                var EndDate = $("#saatBazliEndDateId").val();
                //var saat = $(this).parent("tr").attr("Saat");
                var saatList = $('#saatBazliComboboxSaatListId').val();
                var urunGrubu = $('#SubeyeGoreUrunGrubuListID').val();
                var urunAdi = $('#SubeUrunID').val();
                var satisTipi = $('#SatisTipiComboBoxId').val();

                SaatGunChild(row.child, $('[dataGosterSaatGun="' + childTable + '"]'), subeId, StartDate, EndDate, saatList, urunGrubu, urunAdi, satisTipi);
            });

            function SaatGunChild(callback, element, subeId, StartDate, EndDate, saatList, urunGrubu, urunAdi, satisTipi) {
                $.ajax({
                    url: '/ReportsDetail2/SaatBazliSubeCiroTable?StartDateTime=' + StartDate + '&EndDateTime=' + EndDate + '&SubeId=' + subeId + '&Saat=' + saatList + '&UrunGrubuAdi=' + encodeURIComponent(urunGrubu) + '&UrunAdi=' + encodeURIComponent(urunAdi) +'&SatisTipi=' +satisTipi +'&DetayRaporMu=' + true + '',
                    dataType: "json",
                    success: function (result) {
                        var thead = '', tbody = '';
                        thead += '<th  width="5%" style="background-color:#fee7e4"> </th>';
                        thead += '<th style="text-align:right; background-color:#fee7e4"> Şube Adı </th>';
                        thead += '<th style="text-align:right; background-color:#fee7e4"> Tutar (₺)</th>';
                        sayac = 0;
                        $.each(result.Data, function (index, value) {

                            var ds = value.Ciro.toString();
                            var currency_symbol = "₺"
                            var formattedOutput = new Intl.NumberFormat('tr-TR', {
                                style: 'currency',
                                currency: 'TRY',
                                minimumFractionDigits: 2,
                            });


                            tbody +=
                              '<tr Tarih=' + value.Tarih + ' Saat=' + saatList + ' childUrunRapor="test_' + index + '" data-child-value="hidden ' + value.Tarih + '" role="row" class="odd" style="color:#000000;font-weight:bold">'
                            + '<td width="5%" class="details-urunRaporTable" subeId="' + value.SubeId + '"> <a class="btn btn-s btn-primary detayGostere " title="Ürün Satış Detayı Göster"> <span class="glyphicon glyphicon-plus"></span> </a> </td>'
                            + '<td style="text-align:right">' + value.Sube + '</td>'
                            + '<td style="text-align:right">' + formattedOutput.format(ds).replace(currency_symbol, '')  + '</td>'
                            + '</tr>';
                            tbody += '<tr id="test_' + index + '" dataGosterSaatGunUrunRaporu="test_' + index + '" style="display:none"></tr>';
                            sayac += 1;
                        });

                        callback($('<table id="tableDetay">' + thead + tbody + '</table>')).show();
                        var test = $(' <table id="tableOptions" class="table  table-bordered table-condensed">' + thead + tbody + '</table>');
                        element.html("").append(test);

                        hideProgressBar();
                    },

                    error: function () {
                        hideProgressBar();
                        $('#output').html('Bummer: there was an error!');
                    }
                });
            }

        @* Child *@

            //Rapor Child//
            var table = $('#tableSaatBazliUrunRaporu').DataTable(
                {
                    language: {
                        info: "_TOTAL_ kayıttan _START_ - _END_ kayıt gösteriliyor.",
                        infoEmpty: ".",
                        loadingRecords: "Kayıtlar yükleniyor.",
                        zeroRecords: "Tablo boş",
                        search: "Arama:",
                        infoFiltered: "(toplam _MAX_ kayıttan filtrelenenler)",
                        //paginate: {
                        //    first: "İlk",
                        //    previous: "Önceki",
                        //    next: "Sonraki",
                        //    last: "Son"
                        //},
                    },
                    'columnDefs': [{
                        'targets': [0, 1, 2], /* column index */
                        'orderable': false, /* true or false */
                    }],
                    searching: false,
                    dom: 'Bfrtip',
                });
            table.buttons().remove();
            var table = $('#tableSaatBazliUrunRaporu').DataTable();
            //Rapor Child//

            //Ürün Grubu ve Ürün button click.
            $(document).on('click', 'td.details-urunRaporTable', function () {

                var childTable = $(this).parent("tr").attr("childUrunRapor");
                $('[dataGosterSaatGunUrunRaporu="' + childTable + '"]').slideToggle();
                var tr = $(this).closest('tr');
                var row = table.row(tr);
                var subeId = $(this).attr("subeId");
                var StartDate = $(this).parent("tr").attr("Tarih");
                var EndDate = $(this).parent("tr").attr("Tarih");
                //var saat = $(this).parent("tr").attr("Saat");
                var urunAdi = $('#SubeUrunID').val();
                var urunGrubu = $('#SubeyeGoreUrunGrubuListID').val();
                var satisTipi = $('#SatisTipiComboBoxId').val();
                var saat = $('#saatBazliComboboxSaatListId').val();

                var url = '/ReportsDetail2/SaatBazliUrunGrubuVeUrunSatisRaporu?StartDateTime=' + StartDate + '&EndDateTime=' + EndDate + '&SubeId=' + subeId + '&Saat=' + saat + '&UrunGrubuAdi=' + urunGrubu + '&UrunAdi=' + encodeURIComponent(urunAdi) + '&SatisTipi=' + satisTipi + '';
                $('#genericModal').find(".modal-body").html("");
                var dataurl = url; //$(this).data("url");

                callModalPage(dataurl, "");
                //callModalPageIframe(dataurl,"")
                //showProgressBar();
                $("#modalPleaseWait").on('shown.bs.modal', function () { });
                hideProgressBar();
            });
        }
    @* SAAT BAZLI CİRO RAPORU *@

    });



    //hepsiniSec Şubedeki Ürünleri Şubelere Kopyala
    $("#hepsiniSecSubelerinSatisIstatikleriComboSubeList").on("click", function () {
        if ($(this).is(':checked')) {
            $("#SubelerinSatisIstatikleriComboSubeList > option").prop("selected", "selected");
            $("#SubelerinSatisIstatikleriComboSubeList").trigger("change");
        } else {
            $("#SubelerinSatisIstatikleriComboSubeList > option").removeAttr("selected");
            $("#SubelerinSatisIstatikleriComboSubeList").trigger("change");
        }
    });



    //hepsiniSec Şubedeki Ürünleri Şubelere Kopyala
    $("#hepsiniSecsaatBazliSubeComboListId").on("click", function () {
        if ($(this).is(':checked')) {
            $("#saatBazliSubeComboListId > option").prop("selected", "selected");
            $("#saatBazliSubeComboListId").trigger("change");
        } else {
            $("#saatBazliSubeComboListId > option").removeAttr("selected");
            $("#saatBazliSubeComboListId").trigger("change");
        }
    });
</script>