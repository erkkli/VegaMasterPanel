@model SefimV2.ViewModels.Icmal.IcmalViewModel
@using System.Diagnostics
@using SefimV2.Helper


@{
    #region View tanımları
    ViewBag.Title = string.Empty;
    string Controller = ViewBag.Controller;
    //Layout = "~/Views/Shared/_LayoutPage.cshtml";
    Layout = "~/Views/Shared/_LayoutPageSPos.cshtml";
    #endregion
}
@*<link href="~/Content/ContentSefPanel/css/fieldset/jquery.coolfieldset.css" rel="stylesheet" />
    <link href="~/Content/ContentSefPanel/css/eker/eker.css" rel="stylesheet" />
    <link href="/Assets/css/bootstrap.css" rel="stylesheet" />
    <link href="/Assets/css/custom.css" rel="stylesheet" />
    <link href="/Assets/plugins/fUpload/Uploader-style.css" rel="stylesheet" />*@

<style>
    .bold {
        font-weight: bold;
    }
</style>

<div class="form-horizontal">
    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary()
        @Html.HiddenFor(m => m.Id)
        @*@Html.HiddenFor(m => m.SubeId)*@
        @Html.HiddenFor(m => m.UserId)
        @Html.HiddenFor(m => Model.Islem);
        @Html.HiddenFor(m => Model.Index);

        <fieldset class="well the-fieldset margin-bottom-5 padding-bottom-10 padding-top-10 table-responsive-lg">
            <legend class="the-legend">İcmal Bilgi Ekleme </legend>
            <div class="form-group">
                <div class="bold control-label col-md-2">@Html.DisplayNameFor(model => model.SubeName)</div>
                <div class="col-md-2">  @Html.DropDownListFor(model => model.SubeId, new List<SelectListItem>(), new { @id = "SubeId", @class = "form-control m-select2" })</div>
                <div class="bold control-label col-md-2">@Html.DisplayNameFor(model => model.CashAmount)</div>
                <div class="col-md-2"> @Html.EditorFor(m => m.CashAmount, new { htmlAttributes = new { @class = "form-control " } })</div>
            </div>
            <div class="form-group">
                <div class="bold control-label col-md-2">@Html.DisplayNameFor(model => model.DebitAmount)</div>
                <div class="col-md-2"> @Html.EditorFor(m => m.DebitAmount, new { htmlAttributes = new { @class = "form-control " } })</div>
                <div class="bold control-label col-md-2">@Html.DisplayNameFor(model => model.OnlineAmount)</div>
                <div class="col-md-2"> @Html.EditorFor(m => m.OnlineAmount, new { htmlAttributes = new { @class = "form-control " } })</div>
            </div>
            <div class="form-group">
                <div class="bold control-label col-md-2">@Html.DisplayNameFor(model => model.KreditAmount)</div>
                <div class="col-md-2">
                    <a class="btn btn-sm btn-primary margin-bottom-10 kreditPaymentAdd" data-target="@Html.IdFor(m => m.KreditPaymentBankTypeList)" data-islem="KreditPaymentAdd" data-modalbaslik="@Html.DisplayNameFor(m => m.KreditPaymentBankTypeList)"
                       title="Kredili Ödeme Eklemek için tıklayınız.">
                        <span class="glyphicon glyphicon-plus txt-color-white margin-right-5"></span>
                        Kredili Satış Ekle
                    </a>
                </div>
                <div class="bold control-label col-md-2">@Html.DisplayNameFor(model => model.TicketAmount)</div>
                <div class="col-md-2">
                    <a class="btn btn-sm btn-primary margin-bottom-10 ticketPaymentAdd" data-target="@Html.IdFor(m => m.TicketPaymentTicketTypeList)" data-islem="TicketPaymentAdd" data-modalbaslik="@Html.DisplayNameFor(m => m.TicketPaymentTicketTypeList)"
                       title="Yemek Kartı Ödeme Eklemek için tıklayınız.">
                        <span class="glyphicon glyphicon-plus txt-color-white margin-right-5"></span>
                        Yemek Kartı Satış Ekle
                    </a>
                </div>
            </div>
            <div class="form-group">
                <div class="form-horizontal  col-md-6" id="@Html.IdFor(m=> m.KreditPaymentBankTypeList)">

                    @if (Model.KreditPaymentBankTypeList != null)
                    {
                        <table class="table table-hover table-bordered">
                            <thead class="m-datatable__head">
                                <tr class="m-datatable__row" style="color:#000000;font-weight:bold">
                                    @*<th style="width:10px"></th>*@
                                    <th style="width:10px"></th>
                                    <th style="font-weight:bold">@Html.DisplayNameFor(m => m.KreditPaymentBankTypeList.First().BankName)</th>
                                    <th style="font-weight:bold">@Html.DisplayNameFor(m => m.KreditPaymentBankTypeList.First().Amount)</th>
                                </tr>
                            </thead>
                            <tbody>
                                @for (int i = 0; i < Model.KreditPaymentBankTypeList.Count; i++)
                                {
                                    @Html.HiddenFor(m => Model.KreditPaymentBankTypeList[i].BankaTipi)
                                    @Html.HiddenFor(m => Model.KreditPaymentBankTypeList[i].Amount)
                                    @Html.HiddenFor(m => Model.KreditPaymentBankTypeList[i].BankBkmId)
                                    @Html.HiddenFor(m => Model.KreditPaymentBankTypeList[i].BankName)

                                    <tr data-row="0" class="m-datatable__row">
                                        @*<td class="text-nowrap">
                                                <a class="btn btn-sm btn-warning kreditPaymentUpdate" data-target="@Html.IdFor(m => m.KreditPaymentBankTypeList)" data-islem="KreditPaymentUpdate" data-index="@i" title="Kredili Satış Güncelle">
                                                        <span class="glyphicon glyphicon-edit"></span>
                                                        Güncelle
                                                    </a>
                                            </td>*@
                                        <td class="text-nowrap">
                                            <a class="btn btn-sm btn-danger kreditPaymentDelete" data-target="@Html.IdFor(m=> m.KreditPaymentBankTypeList)" data-islem="KreditPaymentDelete" data-index="@i" title="Sil">
                                                <span class="glyphicon glyphicon-remove"></span>
                                                Sil
                                            </a>
                                        </td>
                                        <td>@Model.KreditPaymentBankTypeList[i].BankName</td>
                                        <td>@Model.KreditPaymentBankTypeList[i].Amount</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    }
                </div>
                <div class="form-horizontal col-md-6" id="@Html.IdFor(m=> m.TicketPaymentTicketTypeList)">

                    @if (Model.TicketPaymentTicketTypeList != null)
                    {<div class="table-responsive">
                            <table class="table table-hover table-bordered">
                                <thead class="m-datatable__head">
                                    <tr class="m-datatable__row" style="color:#000000;font-weight:bold">
                                        @*<th style="width:10px"></th>*@
                                        <th style="width:10px"></th>
                                        <th style="font-weight:bold">@Html.DisplayNameFor(m => m.TicketPaymentTicketTypeList.First().TicketName)</th>
                                        <th style="font-weight:bold">@Html.DisplayNameFor(m => m.TicketPaymentTicketTypeList.First().Amount)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (int i = 0; i < Model.TicketPaymentTicketTypeList.Count; i++)
                                    {
                                        @Html.HiddenFor(m => Model.TicketPaymentTicketTypeList[i].YemekKartiTipi)
                                        @Html.HiddenFor(m => Model.TicketPaymentTicketTypeList[i].Amount)
                                        @Html.HiddenFor(m => Model.TicketPaymentTicketTypeList[i].TicketId)
                                        @Html.HiddenFor(m => Model.TicketPaymentTicketTypeList[i].TicketName)

                                        <tr data-row="0" class="m-datatable__row">
                                            @*<td class="text-nowrap">
                                                    <a class="btn btn-sm btn-warning ticketPaymentUpdate" data-target="@Html.IdFor(m => m.TicketPaymentTicketTypeList)" data-islem="TicketPaymentUpdate" data-index="@i" title="Yemek Kartlı Satış Güncelle">
                                                            <span class="glyphicon glyphicon-edit"></span>
                                                            Güncelle
                                                        </a>
                                                </td>*@
                                            <td class="text-nowrap">
                                                <a class="btn btn-sm btn-danger ticketPaymentDelete" data-target="@Html.IdFor(m=> m.TicketPaymentTicketTypeList)" data-islem="TicketPaymentDelete" data-index="@i" title="Sil">
                                                    <span class="glyphicon glyphicon-remove"></span>
                                                    Sil
                                                </a>
                                            </td>
                                            <td>@Model.TicketPaymentTicketTypeList[i].TicketName</td>
                                            <td>@Model.TicketPaymentTicketTypeList[i].Amount</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    }
                </div>
            </div>
            <br />
            <div class="form-group">
                <div class="col-md-offset-5 col-md-7">
                    <a href="@Url.Action("IcmalList")" class="btn btn-m btn-danger">
                        Vazgeç
                    </a>
                    <input type="submit" value="Kaydet" class="btn btn-m btn-success" />
                </div>
            </div>
        </fieldset>
        <br />
        <fieldset class="well the-fieldset margin-bottom-5 padding-bottom-10 padding-top-10 table-responsive-lg">
            <legend class="the-legend">İcmal Listesi </legend>
            @{
                if (Model.IcmalSalesTypesTemp != null && Model.IcmalSalesTypesTemp.Count > 0)
                {
                    <div class="col-lg-12 col-sm-12 col-xs-12">
                        <div class="table table-hover table-bordered table-responsive table-condensed">
                            <table id="tableRaporIcmalComapare" class="table table-hover table-bordered table-responsive table-condensed">
                                <thead>
                                    <tr style="background-color:#e3e6eb">
                                        <th width="15px">İşlem</th>
                                        <th>Şube</th>
                                        <th>Tarih</th>
                                        <th>Nakit</th>
                                        <th>K.Kartı</th>
                                        <th>Y.Çeki</th>
                                        <th>Online S.</th>
                                        <th>Açık Hesap</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @{
                                        try
                                        {
                                            foreach (var item in Model.IcmalSalesTypesTemp)
                                            {
                                                var backgroundColor = string.Empty;
                                                if (item.OnayDurumu == SefimV2.Enums.General.OnayDurumu.Onayli)
                                                {
                                                    backgroundColor = "background-color:#ecf8ee";
                                                }
                                                else if (item.OnayDurumu == SefimV2.Enums.General.OnayDurumu.OnayBekliyor)
                                                {
                                                    backgroundColor = "background-color:#fff7e0";
                                                }
                                                <tr style="color:#000000;font-weight:bold;@backgroundColor ">
                                                    <td>
                                                        @{
                                                            //var userYetki = BussinessHelper.GetByUserIdForYetkiUser(Model.UserId);
                                                            //var ss=userYetki.YetkiMenuUserList.Count > 0 && userYetki.YetkiMenuUserList.Where(x => x.YetkiDegeri == "SefimPanelUrunEkle/ProductList").Any();
                                                        }

                                                        @if (item.OnayDurumu != SefimV2.Enums.General.OnayDurumu.Onayli || item.UserId == "1")
                                                        {
                                                            <a class='btn btn-xl btn-warning ' href="@Url.Action("Update", "Icmal",
                                                                                                        new {
                                                                                                            id=item.IcmalPaymentId,
                                                                                                            subeId = item.SubeId,
                                                                                                        }) " title="Satışları güncelle.">
                                                                <span class="glyphicon glyphicon-edit"></span>
                                                                Güncelle
                                                            </a>
                                                        }

                                                    </td>
                                                    <td> @String.Format("{0:#,###.00;-#,###.00;0}", item.SubeName) </td>
                                                    <td> @String.Format("{0:#,###.00;-#,###.00;0}", item.PaymentDate) </td>
                                                    <td> @String.Format("{0:#,###.00;-#,###.00;0}", item.CashAmount) </td>
                                                    <td> @String.Format("{0:#,###.00;-#,###.00;0}", item.KreditAmount) </td>
                                                    <td> @String.Format("{0:#,###.00;-#,###.00;0}", item.TicketAmount) </td>
                                                    <td> @String.Format("{0:#,###.00;-#,###.00;0}", item.OnlineAmount) </td>
                                                    <td> @String.Format("{0:#,###.00;-#,###.00;0}", item.DebitAmount) </td>
                                                </tr>
                                            }
                                        }
                                        catch (Exception)
                                        { }
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                }
            }
        </fieldset>
        <div class="modal fade" id="modalKreditPayment" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-md">
                <div class="modal-content panel-success">
                    <div class="modal-header panel-heading">
                        Kredili Satış Ekle/Düzenle
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="form-horizontal">
                            <div class="form-group ">
                                <div class="bold control-label col-md-3">@Html.DisplayNameFor(model => model.KreditPayment.BankaTipi)</div>
                                @*<div class="col-md-9">@Html.EditorFor(model => model.KreditPayment.BankName, new { @htmlAttributes = new { @class = "form-control" } })</div>*@
                                <div class="col-md-8">@Html.EnumDropDownListFor(model => model.KreditPayment.BankaTipi, "Seçiniz", new { @class = "form-control" })</div>
                            </div>
                            <div class="form-group">
                                <div class="bold control-label col-md-3">@Html.DisplayNameFor(model => model.KreditPayment.Amount)</div>
                                <div class="col-md-8">@Html.EditorFor(model => model.KreditPayment.Amount, new { htmlAttributes = new { @class = "form-control " } })</div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-offset-5 col-md-7">
                                    <button type="button" class="btn btn-warning" data-dismiss="modal">Vazgeç</button>
                                    <input type="submit" id="btnKreditPaymentAdd" value="Ekle" class="btn btn btn-success" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="modalKreditPaymentDelete" tabindex="-1" role="dialog" aria-labelledby="modalWarningLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content panel-success">
                    <div class="modal-header panel-heading">
                        Kredili Satış Sil
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </div>
                    <div class="modal-body">Kredili Satış silmek istediğinizden emin misiniz?</div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-warning" data-dismiss="modal" aria-hidden="true">Vazgeç</button>
                        <input type="submit" id="btnKreditPaymentDelete" value=" Sil" class="btn btn-m btn-success" />
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="modalTicketPayment" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-md">
                <div class="modal-content panel-success">
                    <div class="modal-header panel-heading">
                        Yemek Kartlı Satış Ekle/Düzenle
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="form-horizontal">
                            <div class="form-group ">
                                <div class="bold control-label col-md-3">@Html.DisplayNameFor(model => model.TicketPayment.YemekKartiTipi)</div>
                                <div class="col-md-8">@Html.EnumDropDownListFor(model => model.TicketPayment.YemekKartiTipi, "Seçiniz", new { @class = "form-control" })</div>
                            </div>
                            <div class="form-group">
                                <div class="bold control-label col-md-3">@Html.DisplayNameFor(model => model.TicketPayment.Amount)</div>
                                <div class="col-md-8">@Html.EditorFor(model => model.TicketPayment.Amount, new { htmlAttributes = new { @class = "form-control " } })</div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-offset-5 col-md-7">
                                    <button type="button" class="btn btn-warning" data-dismiss="modal">Vazgeç</button>
                                    <input type="submit" id="btnTicketPaymentAdd" value="Ekle" class="btn btn btn-success" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="modalTicketPaymentDelete" tabindex="-1" role="dialog" aria-labelledby="modalWarningLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content panel-success">
                    <div class="modal-header panel-heading">
                        Yemek Kartlı Satış Sil
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </div>
                    <div class="modal-body">Yemek Kartlı Satış silmek istediğinizden emin misiniz?</div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-warning" data-dismiss="modal" aria-hidden="true">Vazgeç</button>
                        <input type="submit" id="btnTicketPaymentDelete" value=" Sil" class="btn btn-m btn-success" />
                    </div>
                </div>
            </div>
        </div>
    }
</div>

@*<script src="~/Scripts/Scripts/fieldset/jquery.coolfieldset.js"></script>
    <script src="~/Scripts/Scripts/custom/eker/eker.js"></script>*@

<script type="text/javascript">

    $(document).ready(function () {
        $("#SubeId").select2();
        SubeList();
    });

    $(document).on('click', '.kreditPaymentAdd', function (event) {
        event.preventDefault();
            var islem = $(this).data('islem');
            var index = $(this).data('index');
            $('#@Html.IdFor(m=> Model.Islem)').val(islem);
            $('#@Html.IdFor(m=> Model.Index)').val(index);
            $('#@Html.IdFor(m=> Model.KreditPayment.BankaTipi)').val("");
            $('#@Html.IdFor(m=> Model.KreditPayment.Amount)').val("");
            $('#@Html.IdFor(m=> Model.KreditPayment.BankBkmId)').val("");
            $('#modalKreditPayment').modal('show');
        });

         $('#btnKreditPaymentAdd').on('click', function () {
                event.preventDefault();
                var form = $('form');
                $.ajax({
                    type: "POST",
                    data: form.serialize(),
                    success: function (data) {
                        $('#modalKreditPayment').modal('hide');
                        var kreditPaymentBankTypeList = $(data).find('#KreditPaymentBankTypeList').html();
                        $('#KreditPaymentBankTypeList').html(kreditPaymentBankTypeList);
                        $('#@Html.IdFor(m=> Model.Islem)').val(null);
                        $('#@Html.IdFor(m=> Model.Index)').val(null);
                    }
                });
         });

        $(document).on('click', '.kreditPaymentDelete', function (event) {
            var islem = $(this).data('islem');
            var index = $(this).data('index');
            $('#@Html.IdFor(m=> Model.Islem)').val(islem);
            $('#@Html.IdFor(m=> Model.Index)').val(index);
            $('#modalKreditPaymentDelete').modal('show');
        });

        $('#btnKreditPaymentDelete').on('click', function () {
               event.preventDefault();
               var form = $('form');
               $.ajax({
                type: "POST",
                data: form.serialize(),
                success: function (data) {
                    $('#modalKreditPaymentDelete').modal('hide');
                    var kreditPaymentBankTypeList = $(data).find('#KreditPaymentBankTypeList').html();
                    $('#KreditPaymentBankTypeList').html(kreditPaymentBankTypeList);
                    $('#@Html.IdFor(m=> m.KreditPayment.BankaTipi)').val('');
                    $('#@Html.IdFor(m=> m.KreditPayment.Amount)').val('');
                    $('#@Html.IdFor(m=> m.KreditPayment.BankBkmId)').val('');
                    $('#@Html.IdFor(m=> Model.Islem)').val(null);
                    $('#@Html.IdFor(m=> Model.Index)').val(null);
                 },
               });
       });

       $(document).on('click', '.kreditPaymentUpdate', function (event) {
            event.preventDefault();
            var islem = $(this).data('islem');
            var index = $(this).data('index');
            $('#@Html.IdFor(m=> Model.Islem)').val(islem);
            $('#@Html.IdFor(m=> Model.Index)').val(index);
            $('#@Html.IdFor(m=> Model.KreditPayment.BankaTipi)').val($('#@Html.IdFor(m=> Model.KreditPaymentBankTypeList[0].BankaTipi)'.replace("_0_", "_" + index + "_")).val());
            $('#@Html.IdFor(m=> Model.KreditPayment.Amount)').val($('#@Html.IdFor(m=> Model.KreditPaymentBankTypeList[0].Amount)'.replace("_0_", "_" + index + "_")).val());
            $('#@Html.IdFor(m=> Model.KreditPayment.BankBkmId)').val($('#@Html.IdFor(m=> Model.KreditPaymentBankTypeList[0].BankBkmId)'.replace("_0_", "_" + index + "_")).val());
            $('#modalKreditPayment').modal('show');
        });

    @*Yemek kartlı satış*@
     $(document).on('click', '.ticketPaymentAdd', function (event) {
        event.preventDefault();
            var islem = $(this).data('islem');
            var index = $(this).data('index');
            $('#@Html.IdFor(m=> Model.Islem)').val(islem);
            $('#@Html.IdFor(m=> Model.Index)').val(index);
            $('#@Html.IdFor(m=> Model.TicketPayment.YemekKartiTipi)').val("");
            $('#@Html.IdFor(m=> Model.TicketPayment.Amount)').val("");
            $('#@Html.IdFor(m=> Model.TicketPayment.TicketId)').val("");

            $('#modalTicketPayment').modal('show');
        });

         $('#btnTicketPaymentAdd').on('click', function () {
                event.preventDefault();
                var form = $('form');
                $.ajax({
                    type: "POST",
                    data: form.serialize(),
                    success: function (data) {
                        $('#modalTicketPayment').modal('hide');
                        var ticketPaymentTicketTypeList = $(data).find('#TicketPaymentTicketTypeList').html();
                        $('#TicketPaymentTicketTypeList').html(ticketPaymentTicketTypeList);
                        $('#@Html.IdFor(m=> Model.Islem)').val(null);
                        $('#@Html.IdFor(m=> Model.Index)').val(null);
                    }
                });
         });


        $(document).on('click', '.ticketPaymentDelete', function (event) {
            var islem = $(this).data('islem');
            var index = $(this).data('index');
            $('#@Html.IdFor(m=> Model.Islem)').val(islem);
            $('#@Html.IdFor(m=> Model.Index)').val(index);
            $('#modalTicketPaymentDelete').modal('show');
        });

        $('#btnTicketPaymentDelete').on('click', function () {
               event.preventDefault();
               var form = $('form');
               $.ajax({
                type: "POST",
                data: form.serialize(),
                success: function (data) {
                    $('#modalTicketPaymentDelete').modal('hide');
                    var ticketPaymentTicketTypeList = $(data).find('#TicketPaymentTicketTypeList').html();
                    $('#TicketPaymentTicketTypeList').html(ticketPaymentTicketTypeList);
                    $('#@Html.IdFor(m=> m.TicketPayment.YemekKartiTipi)').val('');
                    $('#@Html.IdFor(m=> m.TicketPayment.Amount)').val('');
                    $('#@Html.IdFor(m=> m.TicketPayment.TicketId)').val('');
                    $('#@Html.IdFor(m=> Model.Islem)').val(null);
                    $('#@Html.IdFor(m=> Model.Index)').val(null);
                 },
               });
    });

     $(document).on('click', '.ticketPaymentUpdate', function (event) {
            event.preventDefault();
            var islem = $(this).data('islem');
            var index = $(this).data('index');
            $('#@Html.IdFor(m=> Model.Islem)').val(islem);
            $('#@Html.IdFor(m=> Model.Index)').val(index);
            $('#@Html.IdFor(m=> Model.TicketPayment.YemekKartiTipi)').val($('#@Html.IdFor(m=> Model.TicketPaymentTicketTypeList[0].YemekKartiTipi)'.replace("_0_", "_" + index + "_")).val());
            $('#@Html.IdFor(m=> Model.TicketPayment.Amount)').val($('#@Html.IdFor(m=> Model.TicketPaymentTicketTypeList[0].Amount)'.replace("_0_", "_" + index + "_")).val());
            $('#@Html.IdFor(m=> Model.TicketPayment.TicketId)').val($('#@Html.IdFor(m=> Model.TicketPaymentTicketTypeList[0].TicketId)'.replace("_0_", "_" + index + "_")).val());
            $('#modalTicketPayment').modal('show');
        });

    function SubeList() {
        debugger;
        $.ajax({
            url: '/Icmal/SubeListJson',
            type: 'POST',
            beforeSend: function (request) {
                //mApp.blockPage();
            },
            complete: function () {
                window.setTimeout(function () {
                    //mApp.unblockPage();
                }, 100);
            },
            dataType: 'json',
            success: function (data) {
                var options = $('#SubeId');
                $('option', options).remove();
                 options.append($('<option />').val(0).text("Seçiniz"));
                $.each(data, function () {
                    options.append($('<option />').val(this.Value).text(this.Text));
                });
                if ('@Model.SubeId') {
                    $('#SubeId').val('@Model.SubeId').trigger('change');
                }
            }
        });
    }

</script>