@model  SefimV2.ViewModels.SPosVeriGonderimi.SubelereVeriGonderViewModel

<div class="m-content">
    <div class="row">
        <div class="col-lg-12">
            <ul>
                @if (Model.SuccessAlertList != null && Model.SuccessAlertList.Count > 0)
                {
                    foreach (var errors in Model.SuccessAlertList)
                    {
                        <li class="alert alert-success">@errors</li>
                    }
                }
            </ul>
            <div id="notification"></div>
        </div>
    </div>
    <div class="col-lg-12">
        <fieldset class="well the-fieldset margin-bottom-5 padding-bottom-10 padding-top-10 table-responsive-lg">
            <legend class="the-legend">Hedef Şube Listesi</legend>
            <div class="col-lg-12">
                @using (Html.BeginForm("GetSubeListInsertSubePruduct", "SefimPanelVeriGonderimi", FormMethod.Post))
                {
                    @Html.AntiForgeryToken()
                    @Html.ValidationSummary()
                    @Html.HiddenFor(x => x.HedefSubeId)
                    @Html.HiddenFor(x => x.SubeIdGrupList)
                    @Html.HiddenFor(x => x.GuncellenecekSubeGruplariList)

                    if (Model.IsSelectedSubeList != null && Model.IsSelectedSubeList.Count > 0)
                    {
                        <div id="gridView">
                            <table id="tableHedefSubelereYay" class="table table-striped table table-hover table-condensed  table-bordered table-responsive">
                                <thead>
                                    <tr style="background: #fffaf0">
                                        <th width="15%"> <a class="btn btn-default">  <input type="checkbox" id="tumunuSecSubelereYay" /> </a>Tümünü Seç</th>
                                        <th width="30%">Şube Adı</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @{
                                        for (int i = 0; i < Model.IsSelectedSubeList.Count; i++)
                                        {
                                            if (!string.IsNullOrEmpty(Model.IsSelectedSubeList[i].SubeName))
                                            {
                                                @Html.HiddenFor(m => Model.IsSelectedSubeList[i].ID)
                                                @Html.HiddenFor(m => Model.IsSelectedSubeList[i].SubeName)
                                                @Html.HiddenFor(m => Model.IsSelectedSubeList[i].DBName)
                                                <tr>
                                                    <td hideExcel="true"> <a class="btn  btn-default"> @Html.CheckBoxFor(x => Model.IsSelectedSubeList[i].IsSelectedHedefSube)  </a> </td>
                                                    <td> <label class="btn btn-default" style="width:100%">  <h style="font-size:small;">@Model.IsSelectedSubeList[i].SubeName  </h>  </label>  </td>
                                                </tr>
                                            }
                                        }
                                    }
                                </tbody>
                            </table>
                        </div>
                    }

                    <div class="col-md-offset-5 col-md-7">
                        <a class="btn btn-md btn-warning" data-dismiss="modal" aria-label="Close" title="Kapat">
                            Vazgeç
                        </a>
                        <button type="submit" name="Merkez Datada Hazırlanan Ürünleri Aktif Tüm Şubelere Gönderiri" value="Tüm Şubelere Yay"
                                formaction=@Url.Action("GetSubeListInsertSubePruduct","SefimPanelVeriGonderimi",new { isUpdate = true, SubeIdGrupList ="TumSubelereYay" })
                                formmethod="post" class="btn btn-success">
                            <i class="fa fa fa-share"></i>Şubelere Gönder
                        </button>

                        @*<input type="submit" value="Kaydet" class="btn btn-md btn-success" />*@
                    </div>
                }
            </div>
            @*<div class="col-md-offset-5 col-md-7 center">
                    <a href="@Url.Action("Main", "SefimPanelHome", new { subeId = Model.IsSelectedSubeList.FirstOrDefault().ID })" class="btn btn-danger"> Vazgeç </a>
                </div>*@


        </fieldset>
    </div>
</div>

<script type="text/javascript">

    $(document).on("change", '#tumunuSecSubelereYay', function () {
        var seciliMi = $(this).is(":checked");
        $('#tableHedefSubelereYay tbody').find('[type="checkbox"]').prop("checked", seciliMi);
    })

    //$(document).on("change", '#hazirlananSubeTumunuSec', function () {
    //    var seciliMi = $(this).is(":checked");
    //    $('#tableHazirlananUrunler tbody').find('[id="' + $(this).attr('data-subeid') + '"]').find('[type="checkbox"]').prop("checked", seciliMi);
    //})

</script>


