@model IEnumerable<SefimV2.ViewModels.ReportsDetail.ReportsDetailViewModel>

<link href="/Assets/css/bootstrap.css" rel="stylesheet" />
<link href="/Assets/css/custom.css" rel="stylesheet" />
<link href="/Assets/plugins/fUpload/Uploader-style.css" rel="stylesheet" />

<table id="tableProducts" class="table datatable table-bordered table-condensed">
    <thead>
        <tr>
            <th class="column-title">Şube</th>
            @*<th class="column-title" style="text-align:right">Ürün Grubu</th>*@
            <th class="column-title" style="text-align:right">Ürün</th>
            <th class="column-title" style="text-align:right">Miktar</th>
            <th class="column-title" style="text-align:right">Tutar (₺)</th>
        </tr>
    </thead>
    <tbody class="liste">

        @{
            try
            {
                foreach (var item in Model)
                {
                    <tr class="link" style="color:#000000;font-weight:bold ">
                        @*<td>
                                <img src="~/img/details_open.jpg" rel=@item.ProductGroup alt="expand/collapse" data-url="SaatBazliUrunGrubuVeUrunSatisRaporuDetay?StartDateTime=@Model.FirstOrDefault().StartDate&EndDateTime=@Model.FirstOrDefault().StartDate&SubeId=@Model.FirstOrDefault().SubeID&Saat=@Model.FirstOrDefault().StartDate&UrunGrubuAdi=@Model.FirstOrDefault().ProductGroup&UrunAdi=@Model.FirstOrDefault().ProductName">  @item.Sube
                            </td>*@
                        <td> @item.Sube</td>
                        <td style="text-align:right"> @item.ProductName  </td>
                        <td style="text-align:right"> @decimal.Round(item.Miktar, 2, MidpointRounding.AwayFromZero)  </td>
                        <td style="text-align:right"> @decimal.Round(item.Debit, 2, MidpointRounding.AwayFromZero)  </td>
                    </tr>
                }
            }
            catch (Exception)
            { }
        }
    </tbody>
    <tfoot>
        <tr class="total" style=" background-color:#0094ff;color:#ffffff; font-weight:bold ">
            <td style="text-align:right">TOPLAM</td>
            <td> </td>
            <td style="text-align:right">  @decimal.Round(Model.Sum(x => x.Miktar), 2, MidpointRounding.AwayFromZero)  </td>
            <td style="text-align:right">  @decimal.Round(Model.Sum(x => x.Debit), 2, MidpointRounding.AwayFromZero)  </td>
        </tr>
    </tfoot>
</table>

<script type="text/javascript">
    $(document).ready(function () {

        var buttonCommon = {
            exportOptions: {
                format: {
                    body: function (data, row, column, node) {
                        var ank = data.lastIndexOf('>');
                        return data.replace(/[$,.]/g, '.').substring(data.length - (data.length - parseInt(ank) - 1), data.length)
                        data;
                    }
                }
            }
        };

        $('#tableProducts').DataTable({
            language: {
                info: "_TOTAL_ kayıttan _START_ - _END_ kayıt gösteriliyor.",
                infoEmpty: "Gösterilecek hiç kayıt yok.",
                loadingRecords: "Kayıtlar yükleniyor.",
                zeroRecords: "Tablo boş",
                search: "Arama:",
                infoFiltered: "(toplam _MAX_ kayıttan filtrelenenler)",
                buttons: {
                    copyTitle: "Panoya kopyalandı.",
                    copySuccess: "Panoya %d satır kopyalandı",
                    copy: "Kopyala",
                    print: "Yazdır",
                },
                paginate: {
                    first: "İlk",
                    previous: "Önceki",
                    next: "Sonraki",
                    last: "Son"
                },
            },
            dom: 'Bfrtip',
            "pageLength": 80,
            "bDestroy": true,
            //buttons: [
            //    'copy', 'excel', 'pdf', 'print'
            //],
            ////responsive: true
            buttons: [
                $.extend(true, {}, buttonCommon, {
                    extend: 'copyHtml5'
                }),
                $.extend(true, {}, buttonCommon, {
                    extend: 'excelHtml5'
                }),
                $.extend(true, {}, buttonCommon, {
                    extend: 'pdfHtml5'
                }),
                //$.extend(true, {}, buttonCommon, {
                //    extend: 'printHtml5'
                //})
                'print'
            ],
        });
    });
</script>