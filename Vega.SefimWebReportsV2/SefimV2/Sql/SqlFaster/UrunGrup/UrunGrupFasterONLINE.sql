DECLARE @Sube nvarchar(100) = '{SUBEADI}';
DECLARE @par1 nvarchar(20) = '{TARIH1}';
DECLARE @par2 nvarchar(20) = '{TARIH2}';


  (SELECT
     (SELECT SUBEADI
      FROM F0101TBLKRDSUBELER
      WHERE IND=FSB.SUBEIND) AS Sube1,

     (SELECT KASAADI
      FROM F0101TBLKRDKASALAR
      WHERE IND=FSB.KASAIND) AS Kasa,
          SUM(FSH.MIKTAR) AS MIKTAR,
          SUM((((MIKTAR*SATISFIYATI) * (100-ISNULL(FSH.ISK1, 0))/100) * (100-ISNULL(FSH.ISK2, 0))/100) * (100-ISNULL(FSB.ALTISKORAN, 0))/100) AS TUTAR,
          STK.KOD1 AS ProductName
   FROM TBLFASTERSATISHAREKET AS FSH
   LEFT JOIN TBLFASTERSATISBASLIK AS FSB ON FSH.BASLIKIND=FSB.BASLIKIND
   AND FSH.SUBEIND=FSB.SUBEIND
   AND FSH.KASAIND=FSB.KASAIND
   LEFT JOIN F0101TBLSTOKLAR AS STK ON FSH.STOKIND=STK.IND
   WHERE FSH.ISLEMTARIHI>=@par1
     AND FSH.ISLEMTARIHI<=@par2
     AND ISNULL(FSB.IADE, 0)=0
   GROUP BY FSB.SUBEIND,
            FSB.KASAIND,
            STK.KOD1)